<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TieniConto</title>
   <style>
  .riga-evidenziata {
    background-color: yellow; 
    transition: background-color 0.3s;
  }
    
:root {
    --sfondo-pagina: #f5f6fa;
    --sfondo-tabella: #ffffff;
    --testo-principale: #2f3640;
    --colore-primario: #2c3e50;
    --colore-accento: #e74c3c; 
    --colore-bottoni: #3498db; 
    --colore-evidenziatore: #f1c40f; 
}


body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: var(--sfondo-pagina);
    color: var(--testo-principale);
    max-width: 900px; 
    margin: 0 auto;
    padding: 20px;
}

h1 {
    color: var(--colore-primario);
    border-bottom: 2px solid var(--colore-primario);
    padding-bottom: 10px;
}


input[type="text"], 
input[type="number"] {
    padding: 8px;
    margin: 5px 10px 15px 5px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 1rem;
}


button {
    background-color: var(--colore-bottoni);
    color: white;
    border: none;
    padding: 10px 15px;
    margin-right: 5px;
    margin-bottom: 15px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    transition: background-color 0.2s ease, transform 0.1s;
}

button:hover {
    background-color: #2980b9;
}

button:active {
    transform: scale(0.95);
}


table {
    width: 100%;
    border-collapse: collapse;
    background-color: var(--sfondo-tabella);
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    border-radius: 8px;
    overflow: hidden;
}

th, td {
    padding: 12px 15px;
    text-align: center;
    border-bottom: 1px solid #dcdde1;
}

th {
    background-color: var(--colore-primario);
    color: white;
    font-size: 1.1rem;
}


.inputvita {
    width: 70px;
    text-align: center;
    margin-bottom: 0;
}


td button {
    background-color: var(--colore-accento);
    margin-bottom: 0;
}

td button:hover {
    background-color: #c0392b;
}


.riga-evidenziata {
    background-color: var(--colore-evidenziatore) !important;
    font-weight: bold;
    transition: background-color 0.3s ease;
}

.riga-evidenziata td {
    color: #000; 
}
</style>
</head>
 <script>
        function creaEl(){
            var nome=document.getElementById("id1").value;
            var pf=document.getElementById("id2").value;
            var roll=document.getElementById("id3").value;
            var ca=document.getElementById("id4").value;
            var tabella=document.getElementById("tabella").getElementsByTagName('tbody')[0];
            var rigaagg=tabella.insertRow();
            var nomeagg=rigaagg.insertCell(0);
            nomeagg.textContent=nome;
            var pfagg=rigaagg.insertCell(1);
            pfagg.setAttribute("id","pf");
            pfagg.textContent=pf;
            var rollagg=rigaagg.insertCell(2);
            rollagg.textContent=roll;
            rollagg.setAttribute("class","roll");
            caagg=rigaagg.insertCell(3);
            caagg.textContent=ca;
            var funz=rigaagg.insertCell(4);
            var elem=document.createElement('input');
             elem.setAttribute('type','number');
             elem.setAttribute('class','inputvita');
             funz.appendChild(elem);
            var elem1=document.createElement('Button');
            elem1.textContent="Calcola";
            elem1.setAttribute('onclick','sottrai(this)');
            funz.appendChild(elem1);}

        function sottrai(input){
            var riga=input.closest('tr');
            var cella=riga.querySelector('#pf');
            cella2=cella.textContent;
            var valdasott=riga.querySelector(".inputvita").value;
            var cella2=parseInt(cella2);
           if(isNaN(cella2)){return;}
            var val=parseInt(valdasott);
            var calcolata=cella2+val;
            if(calcolata>=0){
            cella.textContent=calcolata;}
            else{
                cella.textContent=0;
            }
        }

        function ordina(){
            var lista=document.querySelectorAll("tbody tr");
            var array=Array.from(lista);
            array.sort(function(rigaA,rigaB){
                var testoA=rigaA.querySelector(".roll").textContent;
                var testoB=rigaB.querySelector(".roll").textContent;
                var valoreA=parseInt(testoA);
                var valoreB=parseInt(testoB);
                return valoreB-valoreA;
            });
            var corpotab=document.querySelector("tbody");
            array.forEach(function(riga){
                corpotab.append(riga);
            })
        }
        let indiceRigaAttuale = -1; 

function segnaturno() {
    const righe = document.querySelectorAll('tbody tr');
    if (righe.length === 0) return; 
    if (indiceRigaAttuale >= 0 && indiceRigaAttuale < righe.length) {
        righe[indiceRigaAttuale].classList.remove('riga-evidenziata');
    }

    indiceRigaAttuale++;
    if (indiceRigaAttuale >= righe.length) {
        indiceRigaAttuale = 0;
    }

    righe[indiceRigaAttuale].classList.add('riga-evidenziata');
}
    </script>
<body>
    <h1>Benvenuti nel contacazzi</h1>
    <a href="tutorial.html" >Per il tutorial sui file json/csv clicca qui</a><br>
    <p>Se si volesse registrare un personaggio inserire / o un carattere a caso nei pf o nella CA</p>
    <a>Inserisci nome creatura:</a><input type="text" id="id1"></input><br>
    <a>Inserisci punti ferita:</a><input type="text" id="id2"></input><br>
    <a>Inserisci Iniziativa</a><input type="number" id="id3"></input><br>
     <a>Inserisci Armor class(CA)</a><input type="number" id="id4"></input><br>
    <button onclick="creaEl()">Crea nuovo</button><button onclick="ordina()">Ordina per Iniziativa</button><button onclick="segnaturno()">Progredisci Turno</button><br>
        
        <table border="1px" id="tabella">
            <thead>
        <tr>
            <th>Nome Creatura</th>
            <th>Punti Ferita</th>
            <th>Roll Iniziativa</th>
            <th>CA</th>
            <th>Modifica PF</th>
        </tr>
        </thead>
        <tbody></tbody>
        
        </table>
</body>

</html>
